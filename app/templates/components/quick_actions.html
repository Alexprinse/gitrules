<div id="quick-actions-section" class="bg-cyan-50 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] p-6 min-h-[500px] flex flex-col transition-opacity duration-300">
    <!-- Header -->
    <div class="mb-6">
        <h2 class="text-2xl font-black text-black mb-2">Quick Actions</h2>
        <p class="text-black font-medium">Add capabilities to your workspace</p>
    </div>

    <!-- Main Column with 3 Categories -->
    <div class="flex-1 space-y-6">
        
        <!-- Add an Agent Section -->
        <div class="bg-white border-2 border-black p-4">
            <h3 class="text-lg font-black text-black mb-3 flex items-center gap-2">
                <span class="text-xl">ü§ñ</span> Add an Agent
            </h3>
            <div class="flex gap-2 flex-wrap">
                <button class="qa-include-btn px-3 py-2 bg-cyan-400 border-2 border-black text-black font-bold shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[-1px] hover:translate-y-[-1px] active:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] transition-all text-sm" 
                        data-template="Researcher">
                    Researcher
                </button>
                <button class="qa-include-btn px-3 py-2 bg-cyan-400 border-2 border-black text-black font-bold shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[-1px] hover:translate-y-[-1px] active:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] transition-all text-sm"
                        data-template="Memory Manager">
                    Memory Manager
                </button>
                <button class="px-3 py-2 bg-gray-200 border-2 border-black text-black font-bold shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[-1px] hover:translate-y-[-1px] active:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] transition-all text-sm"
                        onclick="showFullAgentList()">
                    View all agents ‚Üí
                </button>
            </div>
        </div>

        <!-- Add a Rule Set Section -->
        <div class="bg-white border-2 border-black p-4">
            <h3 class="text-lg font-black text-black mb-3 flex items-center gap-2">
                <span class="text-xl">üìã</span> Add a Rule Set
            </h3>
            <div class="flex gap-2 flex-wrap">
                <button class="qa-include-btn px-3 py-2 bg-pink-400 border-2 border-black text-black font-bold shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[-1px] hover:translate-y-[-1px] active:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] transition-all text-sm"
                        data-template="Python">
                    Python Style
                </button>
                <button class="qa-include-btn px-3 py-2 bg-pink-400 border-2 border-black text-black font-bold shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[-1px] hover:translate-y-[-1px] active:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] transition-all text-sm"
                        data-template="TypeScript">
                    TypeScript Rules
                </button>
                <button class="px-3 py-2 bg-gray-200 border-2 border-black text-black font-bold shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[-1px] hover:translate-y-[-1px] active:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] transition-all text-sm"
                        onclick="showFullRulesList()">
                    View all rules ‚Üí
                </button>
            </div>
        </div>

        <!-- Add an MCP Section -->
        <div class="bg-white border-2 border-black p-4">
            <h3 class="text-lg font-black text-black mb-3 flex items-center gap-2">
                <span class="text-xl">üîå</span> Add an MCP
            </h3>
            <div class="flex gap-2 flex-wrap">
                <button class="qa-include-btn px-3 py-2 bg-yellow-400 border-2 border-black text-black font-bold shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[-1px] hover:translate-y-[-1px] active:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] transition-all text-sm"
                        data-template="Supabase MCP">
                    Supabase
                </button>
                <button class="qa-include-btn px-3 py-2 bg-yellow-400 border-2 border-black text-black font-bold shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[-1px] hover:translate-y-[-1px] active:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] transition-all text-sm"
                        data-template="Github MCP">
                    GitHub
                </button>
                <button class="px-3 py-2 bg-gray-200 border-2 border-black text-black font-bold shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[-1px] hover:translate-y-[-1px] active:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] transition-all text-sm"
                        onclick="showFullMCPList()">
                    View all MCPs ‚Üí
                </button>
            </div>
        </div>
    </div>

    <!-- Choose a Template Section (Below the column) -->
    <div class="mt-8 pt-6 border-t-2 border-black">
        <h3 class="text-lg font-black text-black mb-4">
            ‚ú® Choose a Template
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
            <button class="template-select-btn p-4 bg-gradient-to-r from-cyan-50 to-pink-50 border-2 border-black text-left hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[-2px] hover:translate-y-[-2px] transition-all"
                    data-template-id="full-stack">
                <div class="font-black text-black mb-1">Full-Stack Web App</div>
                <div class="text-sm text-gray-700">Researcher + Python Rules + Supabase MCP</div>
            </button>
            
            <button class="template-select-btn p-4 bg-gradient-to-r from-pink-50 to-yellow-50 border-2 border-black text-left hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[-2px] hover:translate-y-[-2px] transition-all"
                    data-template-id="ai-agent">
                <div class="font-black text-black mb-1">AI Agent Project</div>
                <div class="text-sm text-gray-700">Memory Manager + TypeScript + GitHub MCP</div>
            </button>
            
            <button class="template-select-btn p-4 bg-gradient-to-r from-yellow-50 to-cyan-50 border-2 border-black text-left hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[-2px] hover:translate-y-[-2px] transition-all"
                    data-template-id="data-science">
                <div class="font-black text-black mb-1">Data Science</div>
                <div class="text-sm text-gray-700">Researcher + Python Rules</div>
            </button>
            
            <!-- Start from Scratch -->
            <button id="start-from-scratch-btn" class="p-4 bg-gray-100 border-2 border-black text-left hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[-2px] hover:translate-y-[-2px] transition-all">
                <div class="font-black text-black mb-1">Start from Scratch</div>
                <div class="text-sm text-gray-700">Begin with an empty workspace</div>
            </button>
        </div>
    </div>

    <!-- Back Button (hidden initially) -->
    <button id="back-btn" class="mt-4 px-4 py-2 bg-gray-100 border-2 border-black text-black font-bold shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[-1px] hover:translate-y-[-1px] active:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] transition-all" style="display: none;">
        ‚Üê Back to Quick Actions
    </button>
</div>

<script>
// Template definitions
const TEMPLATE_COMPOSITIONS = {
    'full-stack': [
        { type: 'agent', name: 'Researcher' },
        { type: 'rules', name: 'Python' },
        { type: 'mcp', name: 'Supabase MCP' }
    ],
    'ai-agent': [
        { type: 'agent', name: 'Memory Manager' },
        { type: 'rules', name: 'TypeScript' },
        { type: 'mcp', name: 'Github MCP' }
    ],
    'data-science': [
        { type: 'agent', name: 'Researcher' },
        { type: 'rules', name: 'Python' }
    ]
};

// Global state
let isWorkspaceVisible = false;

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
    const workspaceSection = document.querySelector('.mt-16');
    if (workspaceSection) {
        workspaceSection.style.display = 'none';
        workspaceSection.style.transition = 'opacity 300ms ease-in-out';
    }
    
    // Wire up template buttons
    document.querySelectorAll('.template-select-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const templateId = this.dataset.templateId;
            applyTemplate(templateId);
        });
    });
    
    // Wire up start from scratch button
    const scratchBtn = document.getElementById('start-from-scratch-btn');
    if (scratchBtn) {
        scratchBtn.addEventListener('click', startFromScratch);
    }
    
    // Wire up back button
    const backBtn = document.getElementById('back-btn');
    if (backBtn) {
        backBtn.addEventListener('click', function() {
            if (isWorkspaceVisible) {
                hideWorkspace();
            }
        });
    }
    
    // Wire up Quick Action Include buttons
    document.querySelectorAll('.qa-include-btn').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            const templateName = this.dataset.template;
            if (templateName && window.includeTemplate) {
                window.includeTemplate(templateName);
                showWorkspace();
            }
        });
    });
});

// Apply a template composition
function applyTemplate(templateId) {
    const composition = TEMPLATE_COMPOSITIONS[templateId];
    if (!composition) {
        console.error('Unknown template:', templateId);
        return;
    }
    
    // Create or switch to template-specific context
    if (window.workspaceManager) {
        const contexts = workspaceManager.loadContextsList();
        if (!contexts[templateId]) {
            const templateNames = {
                'full-stack': 'Full-Stack Web App',
                'ai-agent': 'AI Agent Project',
                'data-science': 'Data Science'
            };
            workspaceManager.createContext(templateId, templateNames[templateId] || templateId);
        }
        workspaceManager.switchContext(templateId);
        
        // Apply all template items
        composition.forEach(item => {
            if (window.includeTemplate) {
                window.includeTemplate(item.name);
            }
        });
    }
    
    // Show workspace
    showWorkspace();
}

// Start from scratch with empty context
function startFromScratch() {
    if (window.workspaceManager) {
        // Switch to default context and reset it
        workspaceManager.switchContext('default');
        workspaceManager.reset();
    }
    
    // Show workspace
    showWorkspace();
}

// Show full lists (placeholder functions)
function showFullAgentList() {
    alert('Full agent list coming soon!');
}

function showFullRulesList() {
    alert('Full rules list coming soon!');
}

function showFullMCPList() {
    alert('Full MCP list coming soon!');
}

// Show workspace with fade transition
function showWorkspace() {
    const quickActionsSection = document.getElementById('quick-actions-section');
    const workspaceSection = document.querySelector('.mt-16');
    const backButton = document.getElementById('back-btn');
    
    if (!workspaceSection) {
        console.error('Workspace section not found');
        return;
    }
    
    // Fade out quick actions
    quickActionsSection.style.opacity = '0';
    
    setTimeout(() => {
        // Hide quick actions and show workspace
        quickActionsSection.style.display = 'none';
        workspaceSection.style.display = 'block';
        workspaceSection.style.opacity = '0';
        
        // Show back button
        if (backButton) {
            backButton.style.display = 'inline-block';
        }
        
        // Fade in workspace
        setTimeout(() => {
            workspaceSection.style.opacity = '1';
            isWorkspaceVisible = true;
        }, 50);
    }, 300);
}

// Hide workspace with fade transition
function hideWorkspace() {
    const quickActionsSection = document.getElementById('quick-actions-section');
    const workspaceSection = document.querySelector('.mt-16');
    const backButton = document.getElementById('back-btn');
    
    if (!workspaceSection) {
        console.error('Workspace section not found');
        return;
    }
    
    // Fade out workspace
    workspaceSection.style.opacity = '0';
    
    setTimeout(() => {
        // Hide workspace and show quick actions
        workspaceSection.style.display = 'none';
        quickActionsSection.style.display = 'flex';
        quickActionsSection.style.opacity = '0';
        
        // Hide back button
        if (backButton) {
            backButton.style.display = 'none';
        }
        
        // Fade in quick actions
        setTimeout(() => {
            quickActionsSection.style.opacity = '1';
            isWorkspaceVisible = false;
        }, 50);
    }, 300);
}
</script>